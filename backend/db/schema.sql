-- Create Incidents Table
BEGIN
  EXECUTE IMMEDIATE 'CREATE TABLE INCIDENTS (
    id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    title VARCHAR2(255) NOT NULL,
    description VARCHAR2(1000),
    type VARCHAR2(50),
    latitude NUMBER NOT NULL,
    longitude NUMBER NOT NULL,
    status VARCHAR2(50) DEFAULT ''OPEN'',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  )';
EXCEPTION
  WHEN OTHERS THEN
    IF SQLCODE != -955 THEN
      RAISE;
    END IF;
END;
